{%- assign games = "" | split: "" -%}
{%- for game in include.series.games -%}
    {%- assign games = games | push: game[0] -%}
{%- endfor -%}
{%- assign games = games | sort_natural -%}

{% assign seriesText = include.series.name %}
{% assign firstGame = nil %}
{% if games.size == 1 %}
    {% assign firstGame = games[0] %}
    {% if firstGame != seriesText %}
        {% assign seriesText = firstGame | append: ' <span class="text-muted">(SERIES)</span>' | replace: "SERIES", seriesText %}
    {% endif %}
{% endif %}

<h3 id="{{ include.series.name }}"><a href="#{{ include.series.name }}">ðŸ”—</a> {{ seriesText }}</h3>

{%- if include.series.comment -%}
    <p>{{ include.series.comment | markdownify }}</p>
{%- endif -%}


<ul class="series-list">
{%- if include.games_merged -%}
    {%- assign randos = "" | split: "" -%}
    {%- for rando in include.series.randomizers -%}
        {%- assign randos = randos | push: rando -%}
    {%- endfor -%}
    {%- assign randos = randos | sort_natural: "identifier" -%}

    {%- for rando in randos -%}
        {%- include rando.html rando=rando parent_name=include.series.name standalone=true -%}
    {%- endfor -%}
{%- else -%}
    {%- if firstGame -%}
        {%- include game.html series=include.series game=firstGame notitle=true -%}
    {%- else -%}
        {%- for game in games -%}
            {%- include game.html series=include.series game=game -%}
        {%- endfor -%}
    {%- endif -%}
{%- endif -%}
</ul>
